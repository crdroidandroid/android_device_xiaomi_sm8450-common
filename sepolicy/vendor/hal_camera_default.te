attribute vendor_hal_camerapostproc_xiaomi;
attribute vendor_hal_camerapostproc_xiaomi_client;
attribute vendor_hal_camerapostproc_xiaomi_server;
type vendor_hal_camerapostproc_xiaomi_hwservice, hwservice_manager_type;
allow vendor_hal_camerapostproc_xiaomi_client vendor_hal_camerapostproc_xiaomi_server:binder { call transfer };
allow vendor_hal_camerapostproc_xiaomi_client vendor_hal_camerapostproc_xiaomi_server:binder transfer;
allow vendor_hal_camerapostproc_xiaomi_client vendor_hal_camerapostproc_xiaomi_server:fd *;
allow vendor_hal_camerapostproc_xiaomi_client vendor_hal_camerapostproc_xiaomi_hwservice:hwservice_manager find;
allow vendor_hal_camerapostproc_xiaomi_server vendor_hal_camerapostproc_xiaomi_client:binder transfer;
allow vendor_hal_camerapostproc_xiaomi_server vendor_hal_camerapostproc_xiaomi_client:binder { call transfer };
allow vendor_hal_camerapostproc_xiaomi_server vendor_hal_camerapostproc_xiaomi_client:fd *;
allow vendor_hal_camerapostproc_xiaomi platform_app:binder transfer;
allow vendor_hal_camerapostproc_xiaomi platform_app:binder { call transfer };
allow vendor_hal_camerapostproc_xiaomi platform_app:fd *;
allow vendor_hal_camerapostproc_xiaomi priv_app:binder transfer;
allow vendor_hal_camerapostproc_xiaomi priv_app:binder { call transfer };
allow vendor_hal_camerapostproc_xiaomi priv_app:fd *;
allow vendor_hal_camerapostproc_xiaomi system_app:binder transfer;
allow vendor_hal_camerapostproc_xiaomi system_app:binder { call transfer };
allow vendor_hal_camerapostproc_xiaomi system_app:fd *;
add_hwservice(vendor_hal_camerapostproc_xiaomi_server, vendor_hal_camerapostproc_xiaomi_hwservice)

allow hal_camera_client vendor_hal_camerapostproc_xiaomi_hwservice:hwservice_manager find;
allow hal_camera_default mnt_vendor_file:dir search;
allow hal_camera_default camera_persist_file:dir search;
allow hal_camera_default vendor_persist_sensors_file:dir search;
allow hal_camera_default stmvl53l5_device:chr_file { ioctl open read write };
allow hal_camera_default hal_quickcamera_hwservice:hwservice_manager { add find };
allow hal_camera_default aac_drc_prop:file { getattr  map  open };
allow hal_camera_default ab_update_gki_prop:file { getattr  map  open };
allow hal_camera_default adaptive_haptics_prop:file { getattr  map  open };
allow hal_camera_default apk_verity_prop:file { getattr  map  open };
allow hal_camera_default audio_config_prop:file { getattr  map  open };
allow hal_camera_default bluetooth_a2dp_offload_prop:file { getattr  map  open };
allow hal_camera_default bluetooth_audio_hal_prop:file { getattr  map  open };
allow hal_camera_default boot_status_prop:file { getattr  map  open };
allow hal_camera_default bootanim_config_prop:file { getattr  map  open };
allow hal_camera_default bootanim_system_prop:file { getattr  map  open };
allow hal_camera_default boottime_public_prop:file { getattr  map  open };
allow hal_camera_default bpf_progs_loaded_prop:file { getattr  map  open };
allow hal_camera_default build_attestation_prop:file { getattr  map  open };
allow hal_camera_default build_bootimage_prop:file { getattr  map  open };
allow hal_camera_default camera2_extensions_prop:file { getattr  map  open };
allow hal_camera_default camera_config_prop:file { getattr  map  open };
allow hal_camera_default camerax_extensions_prop:file { getattr  map  open };
allow hal_camera_default codec2_config_prop:file { getattr  map  open };
allow hal_camera_default composd_vm_art_prop:file { getattr  map  open };
allow hal_camera_default composd_vm_vendor_prop:file { getattr  map  open };
allow hal_camera_default cpu_variant_prop:file { getattr  map  open };
allow hal_camera_default ctl_bootanim_prop:file { getattr  map };
allow hal_camera_default ctl_interface_start_prop:file { open };
allow hal_camera_default ctl_start_prop:file { open };
allow hal_camera_default dalvik_runtime_prop:file { open };
allow hal_camera_default dck_prop:file { open };
allow hal_camera_default debugfs_restriction_prop:file { open };
allow hal_camera_default drm_service_config_prop:file { getattr  map  open };
allow hal_camera_default dumpstate_options_prop:file { getattr  map  open };
allow hal_camera_default exported_bluetooth_prop:file { getattr  map  open };
allow hal_camera_default exported_camera_prop:file { getattr  map  open };
allow hal_camera_default exported_overlay_prop:file { getattr  map  open };
allow hal_camera_default framework_watchdog_config_prop:file { getattr  map  open };
allow hal_camera_default hdmi_config_prop:file { getattr  map  open };
allow hal_camera_default hypervisor_prop:file { getattr  map  open };
allow hal_camera_default hypervisor_restricted_prop:file { getattr  map  open };
allow hal_camera_default usb_config_prop:file { getattr  map  open };
allow hal_camera_default usb_control_prop:file { getattr  map  open };
allow hal_camera_default usb_uvc_enabled_prop:file { getattr  map  open };
allow hal_camera_default vehicle_hal_prop:file { getattr  map  open };
allow hal_camera_default vendor_alarm_boot_prop:file { getattr  map  open };
allow hal_camera_default vendor_audio_prop:file { getattr  map  open };
allow hal_camera_default vendor_aware_available_prop:file { getattr  map  open };
allow hal_camera_default vendor_bluetooth_prop:file { getattr  map  open };
allow hal_camera_default vendor_bservice_prop:file { getattr  map  open };
allow hal_camera_default vendor_cap_configstore_dbg_prop:file { getattr  map  open };
allow hal_camera_default vendor_cgroup_follow_prop:file { getattr  map  open };
allow hal_camera_default vendor_cnd_prop:file { getattr  map  open };
allow hal_camera_default vendor_cnd_vendor_prop:file { getattr  map  open };
allow hal_camera_default vendor_confqmaa:file { getattr  map  open };
allow hal_camera_default vendor_console_log_level_prop:file { getattr  map  open };
allow hal_camera_default vendor_console_prop:file { getattr  map  open };
allow hal_camera_default vendor_core_ctl_prop:file { getattr  map  open };
allow hal_camera_default vendor_crash_cnt_prop:file { getattr  map  open };
allow hal_camera_default vendor_crash_detect_prop:file { getattr  map  open };
allow hal_camera_default vendor_ctl_netmgrd_prop:file { getattr  map  open };
allow hal_camera_default vendor_ctl_port-bridge_prop:file { getattr  map  open };
allow hal_camera_default vendor_ctl_qcrild_prop:file { getattr  map  open };
allow hal_camera_default vendor_ctl_qmuxd_prop:file { getattr  map  open };
allow hal_camera_default vendor_ctl_vendor_hbtp_prop:file { getattr  map  open };
allow hal_camera_default vendor_ctl_vendor_imsrcsservice_prop:file { getattr  map  open };
allow hal_camera_default vendor_ctl_vendor_mmid_prop:file { getattr  map  open };
allow hal_camera_default vendor_ctl_vendor_rmt_storage_prop:file { getattr  map  open };
allow hal_camera_default vendor_ctl_vendor_wigigsvc_prop:file { getattr  map  open };
allow hal_camera_default vendor_data_ko_prop:file { getattr  map  open };
allow hal_camera_default vendor_data_qmipriod_prop:file { getattr  map  open };
allow hal_camera_default vendor_data_shsusr_prop:file { getattr  map  open };
allow hal_camera_default vendor_dataadpl_prop:file { getattr  map  open };
allow hal_camera_default vendor_dataqdp_prop:file { getattr  map  open };
allow hal_camera_default vendor_dataqti_prop:file { getattr  map  open };
allow hal_camera_default vendor_dbg_brkpoint_prop:file { getattr  map  open };
allow hal_camera_default vendor_dcvs_prop:file { getattr  map  open };
allow hal_camera_default vendor_ddr_prop:file { getattr  map  open };
allow hal_camera_default vendor_deviceid_prop:file { getattr  map  open };
allow hal_camera_default vendor_disable_spu_prop:file { getattr  open };
allow hal_camera_default vendor_display_notch_prop:file { getattr  map  open };
allow hal_camera_default vendor_display_prop:file { getattr  map  open };
allow hal_camera_default vendor_displayfeature_prop:file { getattr  map  open };
allow hal_camera_default vendor_dolbyv_prop:file { getattr  map  open };
allow hal_camera_default vendor_edgnss_qxwz_downloadak_prop:file { getattr  map  open };
allow hal_camera_default vendor_ese_strongbox_prop:file { getattr  map  open };
allow hal_camera_default vendor_face3d_producer_prop:file { getattr  map  open };
allow hal_camera_default vendor_fda_prop:file { getattr  map  open };
allow hal_camera_default vendor_fm_radio_app_prop:file { getattr  map  open };
allow hal_camera_default vendor_fp_info_prop:file { getattr  map  open };
allow hal_camera_default vendor_gpu_prop:file { getattr  map  open };
allow hal_camera_default vendor_hvdcp_opti_prop:file { getattr  map  open };
allow hal_camera_default vendor_ims_prop:file { getattr  map  open };
allow hal_camera_default vendor_iop_prop:file { getattr  map  open };
allow hal_camera_default vendor_ipa_lnx_agent_prop:file { getattr  map  open };
allow hal_camera_default vendor_ipacm-diag_prop:file { getattr  map  open };
allow hal_camera_default vendor_ipacm_prop:file { getattr  map  open };
allow hal_camera_default vendor_km_strongbox_version_prop:file { getattr  map  open };
allow hal_camera_default vendor_location_prop:file { getattr  map  open };
allow hal_camera_default vendor_mdm_helper_prop:file { getattr  map  open };
allow hal_camera_default vendor_media_performance_class:file { getattr  map  open };
allow hal_camera_default vendor_mm_parser_prop:file { getattr  open };
allow hal_camera_default vendor_thermal_normal_prop:file { getattr  map  open };
allow hal_camera_default vendor_time_service_prop:file { getattr  map  open };
allow hal_camera_default vendor_usb_prop:file { open };

dontaudit hal_camera graphics_device:dir search;
dontaudit hal_camera_default default_prop:file read;
r_dir_file(hal_camera_default, mnt_vendor_file)
r_dir_file(hal_camera_default, camera_persist_file)
r_dir_file(hal_camera_default, vendor_persist_sensors_file)
hal_server_domain(hal_camera_default, vendor_hal_camerapostproc_xiaomi)
add_hwservice(hal_camera_server, vendor_hal_camerapostproc_xiaomi_hwservice)
set_prop(hal_camera_default, vendor_camera_sensor_prop)

allow hal_camera_default cgroup:file r_file_perms;
allow hal_camera_default sys_thermal_flash_state: file rw_file_perms;
